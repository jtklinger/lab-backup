# Lab Backup System - Environment Configuration

# Application
APP_NAME="Lab Backup System"
APP_VERSION="1.0.0"
DEBUG=false

# Security
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Server
HOST=0.0.0.0
PORT=8000
WORKERS=4

# CORS
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Database
DATABASE_URL=postgresql+asyncpg://labbackup:changeme@localhost:5432/lab_backup
DB_ECHO=false
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40

# Redis
REDIS_URL=redis://localhost:6379/0
REDIS_CACHE_TTL=300

# Celery
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=7200

# Storage
BACKUP_BASE_PATH=/backups
BACKUP_COMPRESSION=zstd
BACKUP_ENCRYPTION_ENABLED=false
MAX_BACKUP_SIZE_GB=1000

# Email/SMTP
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=true
SMTP_FROM_EMAIL=backups@example.com
SMTP_FROM_NAME="Lab Backup System"

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/lab-backup/app.log
SYSLOG_ENABLED=false
SYSLOG_HOST=
SYSLOG_PORT=514

# Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090

# Retention Defaults (in days)
RETENTION_DAILY=7
RETENTION_WEEKLY=28
RETENTION_MONTHLY=365
RETENTION_YEARLY=1825
RETENTION_ARCHIVAL=-1

# Alerts
ALERT_STORAGE_THRESHOLD=80
ALERT_ON_BACKUP_FAILURE=true
ALERT_ON_MISSED_SCHEDULE=true

# libvirt
LIBVIRT_DEFAULT_URI=qemu:///system
LIBVIRT_TIMEOUT=300

# Podman
PODMAN_DEFAULT_URI=unix:///run/podman/podman.sock
PODMAN_TIMEOUT=300

# Docker Compose specific
DB_NAME=lab_backup
DB_USER=labbackup
DB_PASSWORD=changeme

# SSL/TLS Configuration
# Enable HTTPS (default: true)
ENABLE_SSL=true
# Hostname for SSL certificate (for self-signed cert generation)
SSL_HOSTNAME=localhost
# HTTPS port (default: 8443)
SSL_PORT=8443
# HTTP fallback port (default: 8000)
HTTP_PORT=8000
# Custom certificate files (optional - leave empty to auto-generate self-signed)
#SSL_CERT_FILE=/app/certs/custom.crt
#SSL_KEY_FILE=/app/certs/custom.key
# Certificate directory (persisted in Docker volume)
SSL_CERT_DIR=/app/certs
